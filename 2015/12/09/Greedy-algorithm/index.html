
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Greedy algorithm | Jason小小日記</title>	
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
  	
    
    
    <meta name="author" content="Jason Liu">
    
    <meta name="description" content="Greedy algorithm is a common method in designing algorithm. It is more like a heuristic method instead of a algorithm. Every time multiple choices are">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <!-- Google Font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Jason小小日記" title="Jason小小日記"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Jason小小日記">Jason小小日記</a></h1>
				<h2 class="blog-motto">紀錄生活中無聊事</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about.html">About</a></li>
					
						<li><a href="/useful_website.html">Useful Website</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:jasonlhy.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/12/09/Greedy-algorithm/" title="Greedy algorithm" itemprop="url">Greedy algorithm</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://jasonlhy.github.io" title="Jason Liu">Jason Liu</a>
    </p>
  <p class="article-time">
    <time datetime="2015-12-08T19:22:03.000Z" itemprop="datePublished">2015-12-09</time>
    更新日期:<time datetime="2015-12-14T06:46:55.000Z" itemprop="dateModified">2015-12-14</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目錄</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The_fractional_knapsack_problem"><span class="toc-number">1.</span> <span class="toc-text">The fractional knapsack problem</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">1.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof"><span class="toc-number">1.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Interval_Sceduling"><span class="toc-number">2.</span> <span class="toc-text">Interval Sceduling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-1"><span class="toc-number">2.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-1"><span class="toc-number">2.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Interval_Partitioning"><span class="toc-number">3.</span> <span class="toc-text">Interval Partitioning</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-2"><span class="toc-number">3.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-2"><span class="toc-number">3.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Minimizing_Lateness"><span class="toc-number">4.</span> <span class="toc-text">Minimizing Lateness</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-3"><span class="toc-number">4.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-3"><span class="toc-number">4.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Limimitation"><span class="toc-number">5.</span> <span class="toc-text">Limimitation</span></a></li></ol>
		</div>
		

		<p>Greedy algorithm is a common method in designing algorithm. It is more like a heuristic method instead of a algorithm. Every time multiple choices are faced, the program make an optimal choice (the choice seems best), so hopefully the final result will also be optimal. Unlike exhaustive dynamic programming  which examines all possibilities, it only concerns the “best choice” and the following consequeunce, and other possible choices will not be re-considered afterward.</p>
<h1 id="The_fractional_knapsack_problem"><a href="#The_fractional_knapsack_problem" class="headerlink" title="The fractional knapsack problem"></a>The fractional knapsack problem</h1><p>Given items <code>I1, V2,...Vn</code> with value <code>V1, V2.,.Vn</code> and weight <code>W1, W2...Wn</code><br>And a bag with weight <code>W</code><br>Find the maximum sum of values of items can carry with the bag if the items can be divided in fraction.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><pre class="sample">
Calculte the value/weight of each item, `V1/W1, V2/W2, ...Vn/Wn`
Extract the item with highest value/weight
   If item can be hold fully into the bag
      Put it in the bag fully
   else 
      Divide the item into fractional amount to fit the remaining space in the bag
</pre>

<p>Example:<br>W = 4</p>
<table>
<thead>
<tr>
<th>Item #</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody>
<tr>
<td>(W, V)</td>
<td>(1, 5)</td>
<td>(2, 9)</td>
<td>(3, 12)</td>
<td>(3, 11)</td>
</tr>
<tr>
<td>V/ W</td>
<td>5</td>
<td>4.5</td>
<td>4</td>
<td>3.67</td>
</tr>
</tbody>
</table>
<ol>
<li>Extrat Item 1, V = 0 + 5, Remaing W = 4 - 1 = 3</li>
<li>Extract Item 2, V = 5 + 9 = 14, Remaining W = 3 - 2 = 1</li>
<li>Extract Item 3, V = 14 + (Remaining W / W3) V3 = 1/3 * 12 = 18</li>
</ol>
<h2 id="Proof"><a href="#Proof" class="headerlink" title="Proof"></a>Proof</h2><p>Item n has the highest value/weight,<br>Item a and b have lower value/weight</p>
<pre class="sample">
Given 
1. Wa + Wb = Wn
2. Vn/Wn < Va/Wa 
3. Vn/Wn < Vb/Wb

Wn * (Vn / Wn) # Value provided by highest v/w item
= (Wa + Wb) * (Vn / Wn)
= (Wa) * (Vn / Wn) + (Wb) * (Vn / Wn)
> (Wa) * (Va / Wa) + (Wb) * (Vb / Wb) # Value provided by other lower v/w items with equal weight
Therefore, Vn > Va + Vb
</pre>

<h1 id="Interval_Sceduling"><a href="#Interval_Sceduling" class="headerlink" title="Interval Sceduling"></a>Interval Sceduling</h1><p>Slect job from a set of jobs (Start, End): (0, 10), (3, 4), (2, 8), (1, 5), (4, 5), (4, 8), (5, 6) (7,9)<br>so that maximum the amount of job cna be done in a period.</p>
<p>Running time: O(n log n)</p>
<h2 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h2><pre class="sample">
Sort them in by finish time so that J1, J2, ...Jn
A = set of selected job
for i = 1 to n
  if (Ji is compatible with A)
    A union Ji

Running time complexity: O(n log n)
</pre>

<h2 id="Proof-1"><a href="#Proof-1" class="headerlink" title="Proof"></a>Proof</h2><pre class="sample">
C = COUNTER EXAMPLE

Not by start time
CCCCCCCCCCCCCCCCCC
  AAAAAA BBBBB

Not by shortest interval
AAAAAAA AAAAAA
      CCCC
</pre>

<p>Proved by “greedy stays head” method, directly compare the greedy algorithm we purposed is not worse than other possible optimal solution in some measure.<br>Let <code>I1, I2 ... In</code> be the set of job selected by greedy algorithm<br>Let <code>J1, J2 ... Jn</code> be the set of job selected by other possible optimal solution<br>If we can show that <code>f(In) &lt;= f(Jn)</code> for all n, the greedy algorithm is considered optimal too, in term of amount of job, the greedy algoritm produces at least same amount of job as the optimal solution get<br><strong>BY INDUCTION:</strong><br>When n holds, n+1 also hold (based on n), it holds for all n</p>
<p>Basis: For r-th job, as we select min finish time<br><code>f(Ir) &lt;= f(Jr)</code></p>
<p>Inductive step:<br><code>f(Ir) &lt;= f(Jr) &lt;= s(Jr+1) &lt;= f(Jr+1)</code><br><code>f(Ir) &lt;= s(Ir+1) &lt;= f(Ir+1)</code></p>
<p>For job <code>r+1</code>, the greedy algorithm selects min finish among other possible choice (Job available after f(Ir)), other optimal solutions select from choices after f(Jr)<br>Therefore, <code>f(Ir+1) &lt;= f(Jr+1)</code><br><code>f(Jr + 1)</code> can be only later or equal to <code>f(Ir+1)</code></p>
<h1 id="Interval_Partitioning"><a href="#Interval_Partitioning" class="headerlink" title="Interval Partitioning"></a>Interval Partitioning</h1><p>Given a set of classes with start time and end time:<br>Allocate room for classes so that minimum rooms are required</p>
<p>Running time: O(n log n), store the class finished time in min-heap</p>
<h2 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h2><pre class="sample">
  Sort the classes by start time c1, c2, ... cn
  d = no. of room needed
  for i = 1 to n
    if (ci is compatible with room k)
       put ci in room k
    else
       allocate a new room d + 1
       put ci in the new room d + 1
       d = d + 1
</pre>


<h2 id="Proof-2"><a href="#Proof-2" class="headerlink" title="Proof"></a>Proof</h2><p><strong>Exploit of structural property</strong><br>Examine what is the property of an feasible solution and optimal solution, prove the greedy algorithm has that property of optimal solution.</p>
<p>A feasible solution could be : Number of classroom needed &gt;= depth<br>where depth means the maximum number of set of intervals with no collision that contain at any given time<br>Therefore, Optimal(Best) solution: Number of classroom needed = depth (1)<br>At any time, at most one class can be assigned to a room (2)<br>Let say depth is 3, and the classroom allocated is also 3, it fits the property so it is the optimal solution. </p>
<p>Questions is : how do we prove that classroom need = depth</p>
<ol>
<li>If d classroom is just opened for job j, it means class j is not compatible with d - 1 classes</li>
<li>Since the classes are sorted in start time by ascending order, d -1 classes start no later than S(j) (Based on 2)</li>
<li>At any time: S(j) + very small amount of time, there will be d classes overlapping at that time, therefore, depth = d </li>
<li>According to (1), it is the optimal solution.</li>
</ol>
<h1 id="Minimizing_Lateness"><a href="#Minimizing_Lateness" class="headerlink" title="Minimizing Lateness"></a>Minimizing Lateness</h1><p>Given a set of Job J1, J2, …Jn with durations T1, T2 … T3 and due time D1, D2…Dn<br>Lateness is defined as max(0, Fi - Dn) where Fi is the finished time of i-th job<br>Minimizing the maximum lateness. </p>
<h2 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h2><p>Sort the jobs with deadline in ascending order<br>let t = current time<br>for i = 1 to n<br>  Si = t<br>  Fi = t + Ti<br>  t = Fi<br>lateness = max(lateness, max(0, Di - Fi))</p>
<h2 id="Proof-3"><a href="#Proof-3" class="headerlink" title="Proof"></a>Proof</h2><p><strong>Exchange argument</strong><br>Indirectly prove our solution is not worse than other, so it is a optimal solution.<br>It is done by transforming other possible solution to our solution without hurting the solution quality.</p>
<ol>
<li>Other solutions may have idle time, our solution have no idle time<br>=&gt; No idle time will decrease the max lateness (GOOD!!)</li>
<li>Other solutions may have inversion of jobs i &lt; j but Dj &lt; Di, other solution have no inversion as we sort by deadline in ascending order<br>=&gt; Let swap them try try, maximum lateness will not decrease after swap</li>
</ol>
<pre class="sample">
Before swap
       Fi    Fj 
[i      ][j   ]

After swap
    Fj'     Fi' 
[j   ][i      ]
</pre>


<p>Only moving later of the finished time of i will increase the lateness<br>because for j: Fj’ &lt; Fj so max(0, Fj’ - Dj) &lt; max(0, Fj - Dj) </p>
<p>For i:<br>lateness of job i before swap = <code>max(0, Fi - Di)   (1)</code><br>&lt;<br>lateness of job i after swap  = <code>max(0, Fi&#39; - Di)</code> = <code>max(0, Fj - Di)   &lt;= (2) because Dj &lt; Di</code><br>The lateness of Job i after swap will not bigger than the original lateness of job j</p>
<h1 id="Limimitation"><a href="#Limimitation" class="headerlink" title="Limimitation"></a>Limimitation</h1><ul>
<li>The final result is not always guaranteed the best, other choices may produce a better final result. (0-1 Knapsack problem) However, when the best answer is not required (approximate answer), greedy algorithm can be a good choice.</li>
<li>Sometime is hard decide which is the “best choice”</li>
</ul>
  
	 </div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/Greedy/">Greedy</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://jasonlhy.github.io/2015/12/09/Greedy-algorithm/" data-title="Greedy algorithm | Jason小小日記" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
  
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/12/13/Minimum-spanning-tree/" title="Minimum spanning tree">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Minimum spanning tree</span>
</a>
</div>


<div class="next">
<a href="/2015/12/08/integrate-cytoscape-with-hexo/"  title="Integrate cytoscaope with hexo (整合cytoscape和hexo)">
 <strong>NEXT:</strong><br/> 
 <span>Integrate cytoscaope with hexo (整合cytoscape和hexo)
</span>
</a>
</div>

</nav>

	
<section id="comment">
  <h1 class="title">文章評論</h1>

  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目錄</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The_fractional_knapsack_problem"><span class="toc-number">1.</span> <span class="toc-text">The fractional knapsack problem</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">1.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof"><span class="toc-number">1.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Interval_Sceduling"><span class="toc-number">2.</span> <span class="toc-text">Interval Sceduling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-1"><span class="toc-number">2.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-1"><span class="toc-number">2.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Interval_Partitioning"><span class="toc-number">3.</span> <span class="toc-text">Interval Partitioning</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-2"><span class="toc-number">3.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-2"><span class="toc-number">3.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Minimizing_Lateness"><span class="toc-number">4.</span> <span class="toc-text">Minimizing Lateness</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution-3"><span class="toc-number">4.1.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proof-3"><span class="toc-number">4.2.</span> <span class="toc-text">Proof</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Limimitation"><span class="toc-number">5.</span> <span class="toc-text">Limimitation</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
			<li><a href="/categories/Algorithm/" title="Algorithm">Algorithm<sup>8</sup></a></li>
		
			<li><a href="/categories/Daily-Life/" title="Daily Life">Daily Life<sup>1</sup></a></li>
		
			<li><a href="/categories/Note/" title="Note">Note<sup>8</sup></a></li>
		
			<li><a href="/categories/Problem/" title="Problem">Problem<sup>6</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Code/" title="Code">Code<sup>3</sup></a></li>
		
			<li><a href="/tags/Dynamic-Programming/" title="Dynamic Programming">Dynamic Programming<sup>3</sup></a></li>
		
			<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
		
			<li><a href="/tags/Graph-Theory/" title="Graph Theory">Graph Theory<sup>3</sup></a></li>
		
			<li><a href="/tags/Greedy/" title="Greedy">Greedy<sup>3</sup></a></li>
		
			<li><a href="/tags/Gundam/" title="Gundam">Gundam<sup>1</sup></a></li>
		
			<li><a href="/tags/Haskell/" title="Haskell">Haskell<sup>3</sup></a></li>
		
			<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>4</sup></a></li>
		
			<li><a href="/tags/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
		
			<li><a href="/tags/Nightmare/" title="Nightmare">Nightmare<sup>1</sup></a></li>
		
			<li><a href="/tags/Pacman/" title="Pacman">Pacman<sup>1</sup></a></li>
		
			<li><a href="/tags/Play/" title="Play">Play<sup>2</sup></a></li>
		
			<li><a href="/tags/Programming/" title="Programming">Programming<sup>1</sup></a></li>
		
			<li><a href="/tags/Programming-Principle/" title="Programming Principle">Programming Principle<sup>1</sup></a></li>
		
			<li><a href="/tags/Ruby/" title="Ruby">Ruby<sup>1</sup></a></li>
		
			<li><a href="/tags/SQL/" title="SQL">SQL<sup>1</sup></a></li>
		
			<li><a href="/tags/Scala/" title="Scala">Scala<sup>3</sup></a></li>
		
			<li><a href="/tags/Slide/" title="Slide">Slide<sup>1</sup></a></li>
		
			<li><a href="/tags/Sorting/" title="Sorting">Sorting<sup>2</sup></a></li>
		
			<li><a href="/tags/Toy/" title="Toy">Toy<sup>1</sup></a></li>
		
		</ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font clearfix">
		
		
		
		<a href="https://github.com/Jasonlhy" target="_blank" title="github"></a>
		
		
		
        <a href="https://www.linkedin.com/pub/jason-liu/80/aa7/6b8" target="_blank" title="linkedin"></a>
        
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman, modified by Jason </a> © 2016 
		
		<a href="http://jasonlhy.github.io" target="_blank" title="Jason Liu">Jason Liu</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
//    t.css('display','none');
  }
  else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



    <script type="text/javascript">
    var disqus_shortname = 'jasonlittlediary';

    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
    </script>






<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-69082428-1', 'auto');  
ga('send', 'pageview');
</script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69082428-1', 'auto');
  ga('send', 'pageview');

</script>





  </body>
</html>
